(()=>{"use strict";var t,e,i,a={90545:(t,e,i)=>{i(30522),i(21466),i(66108),i(96253);var a=i(50167),o=i(26271),n=i(86067),r=i(35676),s=i(49535),h=i(95724),l=i(15544),d=i(40906);i(75115),i(51876),i(50110);function c(){return c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},c.apply(this,arguments)}!window.isMVK&&(window.vkExpand=window.vkExpand||"VK"+ +new Date,window.vkUUID=window.vkUUID||0,window.vkCache=window.vkCache||{});var u="doc",v="photo",g="video",p="album",m="market_album",f=window.isMVK?200:120,w=window.isMVK?604:537,b=window.isMVK?360:343;function y(t,e,i,a){var o={id:t.id,width:(0,d.intval)(e),height:(0,d.intval)(i),lastColumn:a.lastColumn,lastRow:a.lastRow,single:a.single,image:_(t,e,i,a.single),unsized:t.unsized,type:t.type,orig:t};return t.title&&void 0!==t.size?Object.assign(o,{title:t.title,size:t.size}):t.title&&void 0!==t.msize?Object.assign(o,{title:t.title,msize:t.msize}):t.type===g&&t.name&&Object.assign(o,{name:t.name}),"number"==typeof t.duration&&(t.duration=function(t,e){var i;t=Math.max(t,0);var a=Math.floor(t%60);i=a<10?"0"+a:a;var o=(t=Math.floor(t/60))%60;return i=o+":"+i,((t=Math.floor(t/60))>0||e)&&(o<10&&(i="0"+i),i=t+":"+i),i}(t.duration)),o.unsized?o.ratio=1:o.ratio=o.image.width/o.image.height,o}function _(t,e,i,a){if(!t)return{};e=(0,d.intval)(e),i=(0,d.intval)(i);var o,n=window.devicePixelRatio||1;if(t.type===g||t.type===u){(t.vid?["x","y","l","s","m"]:["o","z","y","x","m","s","temp"]).forEach((a=>{t.sizes[a]&&(!o||e*n<=t.sizes[a][1]&&i*n<=t.sizes[a][2])&&(o=t.sizes[a])}))}else{var r=t.thumb?t.thumb.sizes:t.sizes,s=r.x||r[r.length-1],h=s?(s[1]||1)/(s[2]||1):1,l=0;h>e/i?(l=i,h>1&&(l*=h)):(l=e,h<1&&(l/=h)),i*=n,e*=n;var c=!a&&r.o,v="";v=r.temp?"temp":l<75?"s":l<130?"m":c&&r.o&&r.o[1]>=e&&r.o[2]>=i?"o":c&&r.p&&r.p[1]>=e&&r.p[2]>=i?"p":c&&r.q&&r.q[1]>=e&&r.q[2]>=i?"q":c&&r.r&&r.r[1]>=e&&r.r[2]>=i?"r":"x",o=r[v]||[]}return o[1]=(0,d.intval)(o[1]),o[2]=(0,d.intval)(o[2]),o[1]&&o[2]||(t.unsized=!0),{src:o[0],width:o[1],height:o[2]}}function x(t,e,i){var a;switch(t.type){case u:a=t.ratio;break;case g:a=t.ratio||1.777;break;case p:case m:a=1.5;break;default:if(t.sizes&&t.sizes.x){var o=t.sizes.x,n=o[1],r=o[2];n&&r&&(a=n/r)}if(t.sizes&&t.sizes.temp){var s=t.sizes.temp,h=s[1],l=s[2];h&&l&&(a=h/l)}}return a||1}function C(t){return!!~[u,v,g,p,m].indexOf(t.toString())}function M(t,e){var i=z(t)||void 0===t.length?{}:[];for(var a in t)(!/webkit/i.test(_ua)||"layerX"!=a&&"layerY"!=a&&"webkitMovementX"!=a&&"webkitMovementY"!=a)&&(e&&"object"==typeof t[a]&&"prototype"!==a&&null!==t[a]?i[a]=M(t[a]):i[a]=t[a]);return i}var z=t=>"[object Object]"===Object.prototype.toString.call(t);var E=i(76852),k={cache:function(){return cur._thEdCache||(cur._thEdCache={}),cur._thEdCache},loaded:function(){return cur._thEdLoaded||(cur._thEdLoaded={}),cur._thEdLoaded},cur:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return cur._thEdCur||(cur._thEdCur={}),cur._thEdCur})),getMedias:function(t){var e=[];return(t=(0,l.ge)(t))?((this.cache()[t.id]?this.cache()[t.id].previews:[]).forEach((t=>{this.isValidThumbType(t.type)&&e.push([t.type,`${t.ownerId}_${t.itemId}`])})),e):e},init:function(t,e,i){if(t=(0,l.ge)(t)){(i="boolean"==typeof i?{wide:i}:(0,h.clone)(i)||{}).width&&i.height?i.force=!0:(i.width=t.parentNode.offsetWidth,i.height=Math.round(i.width/1.5));var a=[];e.forEach((t=>{this.isValidThumbType(t.type)&&a.push(t)})),(0,l.domData)(t,"te-inited",1),this.cache()[t.id]={previews:a,opts:i,wide:i.wide,height:0,thumbs:[]};var o=this.cur().timer;o&&clearTimeout(o),a.length?this.cur().timer=setTimeout((()=>{var e=this.processThumbs(i.width,i.height,a,i);this.cache()[t.id].thumbs=e.thumbs,this.cache()[t.id].height=e.height;var o=(0,l.cf)();e.thumbs.forEach(((e,i)=>{o.appendChild(this.createThumbEl(t.id,e,i))})),(0,l.val)(t,""),(0,l.toggleClass)(t,"wide",i.wide),(0,l.setStyle)(t,{width:e.width,height:e.height}),t.appendChild(o),(0,l.show)(t),(0,d.isFunction)(i.onUpdate)&&i.onUpdate()}),0):((0,l.hide)(t),(0,l.val)(t,""))}},getParentTooltipCls:function(t){return(0,l.gpeByClass)("_im_text_input",t)?"_im_text_input":"thumb_wrap"},loadAndDisplayImage:function(t,e){if(t&&e&&e.oldImage){var i=new Image,a=e.image,o=e.oldImage;if(this.loaded()[a.src]&&t.src!==a.src)return t.src=a.src,void delete e.oldImage;var n=()=>{t.src===o.src&&(t.src=a.src,delete e.oldImage,this.loaded()[a.src]=!0),(0,s.removeEvent)(i,"load",n)};(0,s.addEvent)(i,"load",n),i.src=a.src}},createThumbEl:function(t,e,i){if(e&&this.isValidThumbType(e.type)){var o,r=e.oldImage||e.image,c=this.crop(e,e.width,e.height),f="draggable_thumb _draggable clear_fix"+(e.unsized?" unsized"+(e.single?" unsized_single":""):""),w=`thumb_wrap fl_l thumb_${e.type}_wrap`;switch(e.lastColumn&&(w+=" last_column"),e.lastRow&&(w+=" last_row"),e.height<50&&(w+=" thumb_no_controls"),e.type){case p:case m:e.orig.restrictionGeo||e.image.src.match(/^\/images\//)&&(w+=" page_album_nocover"),(e.title||e.thumb)&&(o=`\n            <div class="page_album_title">\n              <div class="page_album_size">${e.msize||e.size}</div>\n              <div class="page_album_title_text">${e.title}</div>\n            </div>\n          `),e.orig.restrictionBlur&&(f+=" PostPhotoRestriction--blur"),e.orig.restrictionGeo&&(f+=" PostPhotoRestriction--geo");break;case v:e.orig.restrictionBlur&&(f+=" PostPhotoRestriction--blur"),e.orig.restrictionGeo&&(f+=" PostPhotoRestriction--geo");var b=(0,a.isPhotoeditor3Available)()&&!vk.widget&&!e.orig.restrictionGeo,y=this.cache()[t];o=!(y&&y.opts&&y.opts.nocl)?`\n          <div class="photo_thumb_btns_container">\n            <div class="photo_thumb_btns_overlay">\n              <div class="photo_thumb_btns">\n                <div class="photo_thumb_btn_show _photo_thumb_btn_show" id="ui_btn_show"></div>\n                ${b?'<div class="photo_thumb_btn_editor _photo_thumb_btn_editor" id="ui_btn_pe"></div>':""}\n              </div>\n            </div>\n          </div>\n        `:"";break;case u:o=`\n          ${e.orig.label}\n          <a href="${e.orig.href}" class="post_doc_thumb_link" target="_blank" rel="noopener"></a>\n        `;break;case g:o=e.orig.preview}var _="";e.orig.photoId&&(_=`data-photo-id="${(0,h.clean)(e.orig.photoId)}"`);var x=vk.widget?(0,h.clean)((0,d.unclean)(r.src)):(0,h.clean)(r.src),C=e.unsized||e.orig.preview?"":`\n      <img class="preview _preview" src="${x}" width="${Math.round(c.width)}" height="${Math.round(c.height)}" style="margin:${c.marginTop}px 0 0 ${c.marginLeft}px;"/>\n    `,M=`\n      <div index="${i}" attachment="${e.id}" ${_} class="${w}"${e.name?` aria-label="${(0,h.clean)(e.name)}"`:""} style="width: ${(0,h.intval)(e.width)}px;height: ${(0,h.intval)(e.height)}px;">\n        <div class="${f}" ${e.unsized?` style="background-image:url(${(0,h.clean)(r.src)})"`:""}>\n          ${C}\n          ${o}\n          ${e.type!==g?'<div class="overlay _overlay"></div>':""}\n          <div class="ui_thumb_x_button _close_btn" role="link" aria-label="${(0,h.clean)((0,n.getLang)("dont_attach"))}">\n            <div class="ui_thumb_x"></div>\n          </div>\n        </div>\n      </div>\n    `,z=(0,l.se)(M),k=(0,l.geByClass1)("_preview",z),T=(0,l.geByClass1)("_draggable",z),O=(0,l.geByClass1)("_close_btn",z);if(e.oldImage&&k&&this.loadAndDisplayImage(k,e),(0,s.addEvent)(T,"click",(t=>{if(this.cur().updating||(0,l.domClosest)("_close_btn",t.target))(0,s.cancelEvent)(t);else{var e=(0,l.gpeByClass)("thumb_wrap",t.target),i=this.cache()[e.parentNode.id].previews[e.getAttribute("index")].click;cur.openEditor=(0,l.hasClass)(t.target,"_photo_thumb_btn_editor"),(0,d.isFunction)(i)&&i(t)}})),(0,s.addEvent)(T,"mousedown touchstart",(t=>this.startDrag(t))),(0,s.addEvent)(O,"click",(t=>{var e=(0,l.gpeByClass)("thumb_wrap",t.target);(0,l.hide)((0,l.geByClass1)("_draggable",e)),this.removeMedia(e.parentNode.id,e.getAttribute("index"))})),(0,s.addEvent)(O,"mouseover",(()=>(0,E.showTooltip)(O,{text:(0,n.getLang)("dont_attach"),shift:[11,8],black:1}))),e.type===v){var $=(0,l.geByClass1)("_photo_thumb_btn_show",z);$&&(0,s.addEvent)($,"mouseover",(()=>(0,E.showTooltip)($,{text:(0,n.getLang)("global_photo_attach_show"),shift:[10,8],black:1,appendParentCls:this.getParentTooltipCls(T)})));var I=(0,l.geByClass1)("_photo_thumb_btn_editor",z);I&&(0,s.addEvent)(I,"mouseover",(()=>(0,E.showTooltip)(I,{text:(0,n.getLang)("global_pe_edit"),shift:[9,8],black:1,appendParentCls:this.getParentTooltipCls(T)})))}return z}},getCoords:function(t,e){var i=[];return e=e||(0,l.getXY)(t),Array.from(t.childNodes).forEach((t=>{if((0,l.hasClass)(t,"thumb_wrap")){var a=(0,l.getXY)(t);i[i.length]={id:t.getAttribute("attachment"),x:(0,h.intval)(a[0]-e[0]),y:(0,h.intval)(a[1]-e[1]),width:(0,h.intval)(t.offsetWidth),height:(0,h.intval)(t.offsetHeight),index:(0,h.intval)(t.getAttribute("index")),node:t}}})),i},startDrag:function(t){var e=t.touches&&1==t.touches.length,i=null==t.button||0!=t.button&&!(1==t.button&&o.browser.msie8);if((0,l.hasClass)(t.target,"_photo_thumb_btn_show")||(0,l.hasClass)(t.target,"_photo_thumb_btn_editor"))return(0,s.cancelEvent)(t);if(!(i&&!e||(0,l.domClosest)("_close_btn",t.target)||this.cur().updating)){var a=(0,l.hasClass)(t.target,"draggable_thumb")?t.target:(0,l.gpeByClass)("draggable_thumb",t.target),n=(0,l.gpeByClass)("editable_thumbs",a),r=this.cache()[n.id];if(r&&!((r.previews||[]).length<2))return this.cur().el=a,this.cur().dragHandler=t=>this.drag(t),this.cur().dropHandler=t=>this.drop(t),(0,s.addEvent)(window,"mousemove touchmove",this.cur().dragHandler),(0,s.addEvent)(window,"mouseup touchend touchcancel",this.cur().dropHandler),e||(0,s.cancelEvent)(t)}},drag:function(t){var e=this.cur().el;if(t.touches&&t.touches.length>1)return this.drop();var i=o.browser.android?t.touches[0].pageX+(t.pageX||0):t.pageX,a=o.browser.android?t.touches[0].pageY+(t.pageY||0):t.pageY,n=this.cur();if((0,l.hasClass)(e,"moving")){var d=i-(n.pos[0]+n.x),c=a-(n.pos[1]+n.y);(0,l.setStyle)(e,{left:d,top:c});var u=n.wpos,v={x:d=n.pos[0]+(0,h.intval)(e.style.marginLeft)+d-u[0],y:c=n.pos[1]+(0,h.intval)(e.style.marginTop)+c-u[1],offsetX:e.offsetWidth,offsetY:e.offsetHeight,index:n.i,node:e},g=!1,p=n.i,m=-1;(0,h.each)(n.coords,(function(t,e){if(t!=n.i&&t!=m){e.offsetX=e.node.offsetWidth+5,e.offsetY=e.node.offsetHeight+5;var i=n.coords[t-1],a=n.coords[t+1],o=v.x+v.offsetX/2,r=v.y+v.offsetY/2,s=e.x+e.offsetX/2,h=e.y+e.offsetY/2,d=e.x+e.offsetX,c=e.y+e.offsetY,u=(i&&i.x==e.x&&i.y!=e.y&&0!=e.y||a&&a.x==e.x&&a.y!=e.y)&&0!=e.x,f=o>=s&&(a&&(o<=a.x+a.offsetX/2&&(a.offsetY==e.offsetY||o<d)||a.y!=e.y)||!a&&v.x<=d)&&r>e.y&&r<c,w=o<s&&o>=e.x&&(!i||i.y!=e.y&&!(i.x==e.x&&!a))&&r>e.y&&r<c,b=u&&r>=h&&r<c&&o>e.x&&o<d,y=u&&r<h&&r>=e.y&&o>e.x&&o<d;f=f&&!u,w=w&&!u&&!f,(f||w||b||y)&&(g=!0,p=e.index<n.i&&(f||b)?e.index+1:v.index<e.index&&(y||w)?e.index-1:e.index),p!=n.i?(0,l.setStyle)(e.node,{left:f?-2:w?2:0,top:b?-2:y?2:0}):(0,l.setStyle)(e.node,{left:0,top:0}),f&&a&&a.y==e.y&&a.x>e.x&&v.index>e.index&&((0,l.setStyle)(e.node,{left:0,top:0}),(0,l.setStyle)(a.node,{left:2,top:0}),m=t+1),b&&a&&a.x==e.x&&a.y>e.y&&r<=h&&((0,l.setStyle)(a.node,{left:0,top:0}),m=t+1),y&&i&&i.x==e.x&&i.y<e.y&&r<=h&&((0,l.setStyle)(i.node,{left:0,top:-2}),(0,l.setStyle)(e.node,{left:0,top:0}))}})),n.to_i=g?p:n.i}else{var w=e.parentNode.parentNode,b=(0,l.geByClass1)("_overlay",e),y=(0,l.geByClass1)("_preview",e),_=(0,h.intval)(e.parentNode.getAttribute("index")),x=this.cache()[w.id].thumbs[_],C=(0,l.getXY)(w),M=(0,l.getXY)(e.parentNode),z=this.getCoords(w,C);n.id=w.id,n.i=_,n.to_i=_,n.x=i-M[0],n.y=a-M[1],n.t=x,n.w=x.width,n.h=x.height,n.pos=M,n.wpos=C,n.crop=this.crop(x,x.width,x.height),n.coords=z;var E=this.scale(x.width,x.height,75),k=E[0],T=E[1],O=(0,h.intval)((x.width-k)*(o.browser.mobile?.5:n.x/x.width)),$=(0,h.intval)((x.height-T)*(o.browser.mobile?.5:n.y/x.height));(0,l.addClass)(e,"moving"),(0,l.setStyle)(e,"zIndex",100);var I={duration:f,transition:r.Fx.Transitions.easeOutCubic},j=this.crop(x,k,T);(0,r.animate)(e,{opacity:.85,width:k,height:T,marginLeft:O,marginTop:$},I),(0,r.animate)(b,{opacity:1},I),y&&(0,r.animate)(y,j,I)}return(0,s.cancelEvent)(t)},drop:function(t){var e=this.cur();document.removeEventListener("touchmove",this.preventScroll),e.updating=!0;var i=e.el,a=(0,l.geByClass1)("_overlay",i),o=(0,l.geByClass1)("_preview",i);if((0,s.removeEvent)(window,"mousemove touchmove",e.dragHandler),(0,s.removeEvent)(window,"mouseup touchend touchcancel",e.dropHandler),!(0,l.hasClass)(i,"moving"))return e.updating=!1,(0,s.cancelEvent)(t);if(e.to_i==e.i){var n=e.crop,c={duration:f,transition:r.Fx.Transitions.easeOutCubic};(0,r.animate)(i,{marginTop:0,marginLeft:0,top:0,left:0,width:e.w,height:e.h,opacity:1},(0,h.extend)(c,{onComplete:()=>{(0,l.setStyle)(i,"zIndex",null),e.updating=!1}})),(0,r.animate)(a,{opacity:0},c),o&&(0,r.animate)(o,n,c)}else{var u=this.cache()[e.id].previews;u=this.move(u,e.i,e.to_i),this.update(e.id,u),(0,d.isFunction)((this.cache()[e.id].opts||{}).onMove)&&this.cache()[e.id].opts.onMove()}return(0,l.removeClass)(i,"moving"),(0,s.cancelEvent)(t)},update:function(t,e){if(t=(0,l.ge)(t)){var i=t.id,a=(0,l.ge)(i),o=this.cache()[a.id],n=o.thumbs,s=o.height,c=o.opts,u=!0===c||!1===c?{wide:c}:(0,h.clone)(c||{}),v=u.width,g=u.height;v&&g?u.force=!0:(v=t.parentNode.offsetWidth,g=Math.round(v/1.5));var p=this.processThumbs(v,g,e,u),m=(0,l.se)(`\n      <div style="height: 0;overflow: hidden;">\n        <div class="_editable_thumbs editable_thumbs${o.wide?" wide":""}" style="width: ${p.width}px;height: ${p.height}px;"></div>\n      </div>\n    `),w=(0,l.geByClass1)("_editable_thumbs",m);p.thumbs.forEach(((t,e)=>{w.appendChild(this.createThumbEl(i,t,e))})),a.parentNode.appendChild(m);var b=this.getCoords(w);(0,h.each)(b,((t,e)=>{for(var i=null,a=this.cur().coords,o=0,s=a.length;o<s;++o)if(a[o].id==e.id){i=a[o];break}if(null!=i){var d=(0,l.geByClass1)("_draggable",i.node),c=(0,l.geByClass1)("_overlay",d),u=(0,l.geByClass1)("_preview",d),v=n[i.index],g=null;(0,h.each)(p.thumbs,((t,e)=>{e.id==v.id&&(this.loaded()[e.image.src]||(e.oldImage=v.image),g=e)})),(0,l.setStyle)(i.node,{left:0,top:0}),i.height==e.height&&i.width==i.width&&e.x==i.x&&e.y==i.y&&i.index!=this.cur().i||((0,l.hasClass)(d,"moving")&&(0,r.fadeOut)(c,f),setTimeout((()=>{(0,r.animate)(d,{top:e.y-i.y,left:e.x-i.x,marginLeft:0,marginTop:0,height:e.height,width:e.width,opacity:1},f);var t=this.crop(g,e.width,e.height);u&&(0,r.animate)(u,t,f),(0,l.toggleClass)(d,"unsized_single",g.unsized&&g.single)}),4))}})),s!=p.height&&setTimeout((()=>{(0,r.animate)(a,{height:p.height},f)}),4),setTimeout((()=>{(0,d.isFunction)(u.onUpdate)&&u.onUpdate(),(0,l.setStyle)(a,{height:p.height,width:p.width}),a.innerHTML="",this.cache()[i].thumbs=p.thumbs,this.cache()[i].previews=e,this.cache()[i].height=p.height,p.thumbs.forEach(((t,e)=>{a.appendChild(this.createThumbEl(i,t,e))})),(0,l.re)(m),this.cur().updating=!1}),f)}},setWide:function(t,e,i){if(t=(0,l.ge)(t)){var a=this.cache()[t.id],o=(0,h.clone)(i||{});void 0===e&&(e=!1),o.wide=e,a.wide!=e&&this.init(t,a.previews,o)}},hasMedia:function(t,e){if(t=(0,l.ge)(t)){var i=t.id,a=this.cache()[i];if(a){for(var o=0;o<a.previews.length;o++)if(a.previews[o][a.previews[o].type].id==e)return!0;return!1}}},addMedia:function(t,e){if((t=(0,l.ge)(t))&&e){var i=t.id,a=this.cache()[i];if(a){var o=(0,h.clone)(a.previews);10==o.length||this.hasMedia(t,e[e.type].id)||(o[o.length]=e,this.cache()[i]=null,this.init(i,o,(0,h.clone)(a.opts)))}}},updateMedia:function(t,e,i,a){if((t=(0,l.ge)(t))&&e&&i&&a){var o=t.id,n=this.cache()[o];if(n){for(var r=(0,h.clone)(n.previews),s=!1,d=e+i,c=0;c<r.length;c++)if(r[c][r[c].type].id==d){var u=this.convert(e,i,a.editable);r[c]=u,s=!0;break}s&&(this.cache()[o]=null,this.init(o,r,(0,h.clone)(n.opts)))}}},refresh:function(t){if(t=(0,l.ge)(t)){var e=t.id,i=this.cache()[e];i&&(this.cache()[e]=null,this.init(e,(0,h.clone)(i.previews),(0,h.clone)(i.opts)))}},removeAll:function(t){if(t=(0,l.ge)(t)){var e=t.id,i=this.cache()[e];i&&(this.cache()[e]=null,this.init(e,[],i.opts))}},removeMedia:function(t,e){if(!(t=(0,l.ge)(t)))return null;e=(0,h.intval)(e);var i=this.cache()[t.id];if(i){var a=i.previews.splice(e,1),o=a[0][a[0].type].id;return(0,h.each)(t.childNodes,((t,e)=>{if(e.getAttribute&&e.getAttribute("attachment")==o){var i=((0,l.geByClass1)("_close_btn",e)||{}).tt;return i&&i.destroy&&i.destroy(),!1}})),this.cur().coords=this.getCoords(t),0==i.previews.length?this.init(t,[],i.opts):this.update(t,i.previews),a[0]&&a[0].remove&&a[0].remove(),a}},removeById:function(t,e){if(!(t=(0,l.ge)(t)))return null;for(var i=(this.cache()[t.id]||{}).previews||[],a=0,o=i.length;a<o;++a)if(i[a].type==u&&i[a].doc.id==e||i[a].type==v&&i[a].photo.id==e||i[a].type==g&&i[a].video.id==e||i[a].type==p&&i[a].album.id==e||i[a].type==m&&i[a].market_album.id==e)return this.removeMedia(t,a);return null},processThumbs:function(t,e,i,a){var o=function(t){var e=0;return(0,d.each)(t,((t,i)=>{e+=i})),e},n=function(t,e,i){return(e-(t.length-1)*i)/o(t)},r=(a=z(a)?a:{}).wide,s=[],h=0,l=[],c=[];(0,d.each)(i,((t,e)=>{C(e.type)&&(l[l.length]=e[e.type]),e.type===g&&s.push(h),h++}));var u="",v=[],p=l.length;(0,d.each)(l,((i,a)=>{var o=x(a,t,e);u+=o>1.2?"w":o<.8?"v":"q",v[v.length]=o}));var m,f,_=v.length>0?o(v)/v.length:1,E=5;window.isMVK&&(E=window.innerWidth>=480?6:3);var k=E;a.force?(m=t,f=e):(r?(m=w,f=b):t>=381?(m=381,f=1==p?361:237):(m=337,f=1==p?320:214),t<m&&(m=t,f=e),window.isMVK&&(m=Math.min(w,window.innerWidth),f=Math.min(b,m)));var T=m/f,O=0,$=0;if(1==p){var I={lastColumn:1,lastRow:1,single:1};l[0].thumb?(O=279,$=185):v[0]>=1*T?(O=m,$=Math.min(O/v[0],f)):($=f,O=Math.min($*v[0],m));var j=y(l[0],O,$,I);!j.unsized&&(j.image.width<O&&j.image.height<=f||j.image.height<$&&j.image.width<=m)&&(O=j.image.width,$=j.image.height,j=y(l[0],O,$,I)),c[0]=j}else if(2==p){var B,R;switch(u){case"ww":if(_>1.4*T&&v[1]-v[0]<.2){R=m,B=Math.min(R/v[0],R/v[1],(f-k)/2),c[0]=y(l[0],R,B,{lastColumn:1}),c[1]=y(l[1],R,B,{lastColumn:1,lastRow:1}),O=m,$=2*B+k;break}case"vv":case"qv":case"vq":case"qq":R=(m-E)/2,B=Math.min(R/v[0],R/v[1],f),c[0]=y(l[0],R,B,{lastRow:1}),c[1]=y(l[1],R,B,{lastRow:1,lastColumn:1}),O=m,$=B;break;default:var P=(0,d.intval)((m-E)/v[1]/(1/v[0]+1/v[1])),S=m-P-E;B=Math.min(f,P/v[0],S/v[1]),c[0]=y(l[0],P,B,{lastRow:1}),c[1]=y(l[1],S,B,{lastColumn:1,lastRow:1}),O=m,$=B}}else if(3==p)if((v[0]>1.2*T||_>1.5*T)&&"www"==u){var Y,L=m,X=Math.min(L/v[0],.66*(f-k));if(c[0]=y(l[0],L,X,{lastColumn:1}),"www"==u){var A=(0,d.intval)(m-E)/2;Y=Math.min(f-X-k,A/v[1],A/v[2]),c[1]=y(l[1],A,Y,{lastRow:1}),c[2]=y(l[2],m-A-E,Y,{lastColumn:1,lastRow:1})}else{var N=(0,d.intval)((m-E)/v[2]/(1/v[1]+1/v[2])),V=m-N-E;Y=Math.min(f-X-k,N/v[2],V/v[1]),c[1]=y(l[1],N,Y,{lastRow:1}),c[2]=y(l[2],N,Y,{lastRow:1,lastColumn:1})}O=m,$=X+Y+k}else{var H=f,q=(0,d.intval)(Math.min(H*v[0],.75*(m-E)));c[0]=y(l[0],q,H,{lastRow:1});var U=v[1]*(f-k)/(v[2]+v[1]),D=f-U-k,G=Math.min(m-q-E,(0,d.intval)(U*v[2]),(0,d.intval)(D*v[1]));c[1]=y(l[1],G,D,{lastColumn:1}),c[2]=y(l[2],G,U,{lastColumn:1,lastRow:1}),O=q+G+E,$=f}else if(4==p)if((v[0]>1.2*T||_>1.5*T)&&"wwww"==u){var W=m,F=Math.min(W/v[0],.66*(f-k));c[0]=y(l[0],W,F,{lastColumn:1});var K=(m-2*E)/(v[1]+v[2]+v[3]),J=(0,d.intval)(K*v[1]),Q=(0,d.intval)(K*v[2]),Z=W-J-Q-2*E;K=Math.min(f-F-k,K),c[1]=y(l[1],J,K,{lastRow:1}),c[2]=y(l[2],Q,K,{lastRow:1}),c[3]=y(l[3],Z,K,{lastColumn:1,lastRow:1}),O=m,$=F+K+k}else{var tt=f,et=Math.min(tt*v[0],.66*(m-E)),it=(f-2*k)/(1/v[1]+1/v[2]+1/v[3]),at=(0,d.intval)(it/v[1]),ot=(0,d.intval)(it/v[2]),nt=tt-at-ot-2*k;et+(it=Math.min(m-et-E,it))+E<m&&tt*v[0]>et&&(et=Math.min(tt*v[0],m-E-it)),c[0]=y(l[0],et,tt,{lastRow:1}),c[1]=y(l[1],it,at,{lastColumn:1}),c[2]=y(l[2],it,ot,{lastColumn:1}),c[3]=y(l[3],it,nt,{lastColumn:1,lastRow:1}),O=et+it+E,$=f}else{var rt=[],st=0;_>(s.length?1.3:1.1)?(0,d.each)(v,((t,e)=>{rt[rt.length]=Math.max(1,e)})):(0,d.each)(v,((t,e)=>{~s.indexOf(st)?rt[rt.length]=e:rt[rt.length]=Math.min(1,e),st++}));var ht,lt,dt={};for(dt[p+""]=[n(rt,m,E)],ht=1;ht<=p-1;ht++)dt[ht+","+(lt=p-ht)]=[n(rt.slice(0,ht),m,E),n(rt.slice(ht),m,E)];for(ht=1;ht<=p-2;ht++)for(lt=1;lt<=p-ht-1;lt++)dt[ht+","+lt+","+(p-ht-lt)]=[n(rt.slice(0,ht),m,E),n(rt.slice(ht,ht+lt),m,E),n(rt.slice(ht+lt),m,E)];var ct,ut=null,vt=0;for(var gt in dt)if(dt.hasOwnProperty(gt)){var pt=dt[gt],mt=o(pt)+k*(pt.length-1),ft=Math.abs(mt-f);if(~gt.indexOf(",")){for(var wt=gt.split(","),bt=0;bt<wt.length;bt++)wt[bt]=(0,d.intval)(wt[bt]);(wt[0]>wt[1]||wt[2]&&wt[1]>wt[2])&&(ft+=50,ft*=1.5)}(null===ut||ft<vt)&&(ut=gt,vt=ft,ct=mt)}for(var yt=M(l),_t=M(rt),xt=ut.split(","),Ct=dt[ut],Mt=xt.length-1,zt=0;zt<xt.length;zt++){var Et=parseInt(xt[zt]),kt=yt.splice(0,Et),Tt=Ct.shift(),Ot=kt.length-1,$t={};Mt==zt&&($t.lastRow=!0);for(var It=m,jt=0;jt<kt.length;jt++){var Bt=kt[jt],Rt=_t.shift(),Pt=$t,St=void 0;Ot==jt?(St=Math.ceil(It),Pt.lastColumn=!0):It-=(St=(0,d.intval)(Rt*Tt))+E,c[c.length]=y(Bt,St,Tt,Pt)}}O=m,$=ct}return{width:(0,d.intval)(O),height:(0,d.intval)($),thumbs:c}},compute:y,getSize:_,move:function(t,e,i){if(i>=t.length)for(var a=i-t.length;1+a--;)t.push(void 0);return t.splice(i,0,t.splice(e,1)[0]),t},scale:function(t,e,i,a){i=(0,d.intval)(i),a=(0,d.intval)(a)||i;var o=t,n=e;return t>=e&&t>i?(o=(0,d.intval)(i),n=(0,d.intval)(e/(t/i))):t<e&&e>a&&(n=(0,d.intval)(a),o=(0,d.intval)(t/(e/a))),[o,n]},crop:function(t,e,i){var a=e,o=i,n=0,r=0;if(!t.vid&&t.image.width&&t.image.height){var s=t.image.width/t.image.height;s<e/i?(t.single&&t.image.width<e&&(e=t.image.width,i=Math.min(i,t.image.height)),(o=(a=e)/s)>i&&(r=-(0,d.intval)((o-i)/2))):(t.single&&t.image.height<i&&(i=t.image.height,e=Math.min(e,t.image.width)),(a=(o=i)*s)>e&&(n=-(0,d.intval)((a-e)/2)))}return{width:a,height:o,marginLeft:n,marginTop:t.orig&&(t.type===m||t.type===p)&&t.single?0:r}},getRatio:x,convert:function(t,e,i,a){var o=e.split("_"),n=o[0],r=o[1],s=c({owner_id:n,ownerId:n,itemId:r,type:t,remove:i.remove,click:i.click,temp:"temp"in i.sizes},a);switch(t){case u:s.data={sizes:i.sizes,ratio:i.ratio,label:i.label,href:i.href},s.doc=s.data;break;case v:s.data={pid:r,sizes:i.sizes,restrictionBlur:i.restrictionBlur,restrictionGeo:i.restrictionGeo,photoId:i.photoId},s.photo=s.data;break;case g:s.data={vid:r,duration:i.duration,platform:i.platform,play_icon:i.play_icon,preview:i.preview,active_live:i.active_live,restriction:i.restriction,ratio:i.ratio,sizes:i.sizes,name:i.name},s.video=s.data;break;case p:s.data={aid:r,title:i.title,size:i.size,thumb:{sizes:i.sizes},restrictionBlur:i.restrictionBlur,restrictionGeo:i.restrictionGeo,photoId:i.photoId},s.album=s.data;break;case m:s.data={type:m,aid:r,title:i.title,msize:i.msize,thumb:{sizes:i.sizes}},s.market_album=s.data}return s.data.type=t,s.data.id=s.temp?`${t}temp_${n}`:`${t}${s.ownerId}_${s.itemId}`,s},isValidThumbType:C};window.ThumbsEdit=k;try{window.stManager.done(window.jsc("web/thumbs_edit.js"))}catch(t){}}},o={};function n(t){var e=o[t];if(void 0!==e)return e.exports;var i=o[t]={id:t,loaded:!1,exports:{}};return a[t].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=a,t=[],n.O=(e,i,a,o)=>{if(!i){var r=1/0;for(d=0;d<t.length;d++){for(var[i,a,o]=t[d],s=!0,h=0;h<i.length;h++)(!1&o||r>=o)&&Object.keys(n.O).every((t=>n.O[t](i[h])))?i.splice(h--,1):(s=!1,o<r&&(r=o));if(s){t.splice(d--,1);var l=a();void 0!==l&&(e=l)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[i,a,o]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},i=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,n.t=function(t,a){if(1&a&&(t=this(t)),8&a)return t;if("object"==typeof t&&t){if(4&a&&t.__esModule)return t;if(16&a&&"function"==typeof t.then)return t}var o=Object.create(null);n.r(o);var r={};e=e||[null,i({}),i([]),i(i)];for(var s=2&a&&t;"object"==typeof s&&!~e.indexOf(s);s=i(s))Object.getOwnPropertyNames(s).forEach((e=>r[e]=()=>t[e]));return r.default=()=>t,n.d(o,r),o},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.e=()=>Promise.resolve(),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={53081:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var a,o,[r,s,h]=i,l=0;for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(h)var d=h(n);for(e&&e(i);l<r.length;l++)o=r[l],n.o(t,o)&&t[o]&&t[o][0](),t[r[l]]=0;return n.O(d)},i=self.webpackChunkvk=self.webpackChunkvk||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var r=n.O(void 0,[76429,22897,75514,24509,40885,68592],(()=>n(90545)));r=n.O(r)})();